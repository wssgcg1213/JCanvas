{"version":3,"sources":["main.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AAC/C,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;AAC9B,IAAI,UAAU,GAAG,SAAb,UAAU,CAAG,MAAM,EAAI;AACvB,UAAM,GAAG,AAAC,MAAM,KAAK,SAAS,GAAI,EAAE,GAAG,MAAM,CAAC;AAC9C,QAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC;QACnC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC;QACnC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC;AACxC,WAAO,IAAI,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE;AAC9B,SAAC,EAAE,CAAC;AACJ,SAAC,EAAE,CAAC;AACJ,aAAK,EAAE,MAAM,GAAG,CAAC;AACjB,YAAI,EAAE,gBAAY;AACd,gBAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;AACrB,gBAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AACzD,gBAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;AACrB,gBAAI,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC,GAAG,MAAM,CAAA,AAAC,CAAC,GAAG,GAAG,CAAC;AAC1G,gBAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;SACnB;KACJ,CAAC,CAAC;CACN,CAAC;;AAEF,IAAI,UAAU,GAAG,SAAb,UAAU,GAAS;AACnB,QAAI,WAAW,GAAG,GAAG;QACjB,KAAK,GAAG,CAAC;QACT,KAAK,GAAG,EAAE;QACV,KAAK,GAAG,EAAE;QACV,GAAG,GAAG,CAAC;QACP,GAAG,GAAG,CAAC;QACP,MAAM,GAAG,CAAC;QACV,MAAM,GAAG,CAAC,CAAC;;AAEf,SAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;AAC5B,YAAI,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;AAC7B,aAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACrB,YAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC;AACtC,YAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC;AACtC,YAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC;AACtC,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACpB;AACD,OAAG,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;AACvB,OAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;;AAExB,SAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AAChD,cAAM,GAAG,CAAC,CAAC,GAAG,GAAG,CAAA,GAAI,IAAI,CAAC;AAC1B,cAAM,GAAG,CAAC,CAAC,GAAG,GAAG,CAAA,GAAI,IAAI,CAAC;KAC7B,CAAC,CAAC;;AAEH,aAAS,OAAO,CAAC,IAAI,EAAE,MAAM,EAAE;AAC3B,YAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;YACvB,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;YACvB,EAAE,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI;YACxC,EAAE,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAC7C,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;KAClB;;AAED,aAAS,OAAO,CAAC,IAAI,EAAE,MAAM,EAAE;AAC3B,YAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;YACvB,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;YACvB,EAAE,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI;YACxC,EAAE,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAC7C,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;KAClB;;AAED,aAAS,MAAM,CAAC,IAAI,EAAE;AAClB,YAAK,IAAI,CAAC,IAAI,GAAG,CAAC,WAAW,EAAG;AAC5B,gBAAI,KAAK,GAAG,WAAW,IAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAA,AAAC,CAAC;AACpD,gBAAI,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AACjC,gBAAI,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AACjC,gBAAI,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC;;AAE/B,gBAAI,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC;AAC/C,gBAAK,EAAE,IAAI,KAAK,EAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;SACrC;KACJ;;AAED,aAAS,qBAAqB,GAAG;AAC7B,YAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AACpB,WAAG,CAAC,SAAS,EAAE,CAAC;AAChB,WAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,aAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,eAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACtC;AACD,WAAG,CAAC,SAAS,EAAE,CAAC;AAChB,WAAG,CAAC,MAAM,EAAE,CAAC;KAChB;;AAED,aAAS,KAAK,GAAG;AACb,aAAK,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AACvB,mBAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAA;SACzB,CAAC,CAAC;AACH,aAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AAChC,mBAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAA;SACzB,CAAC,CAAC;KACN;;AAED,SAAK,CAAC,SAAS,GAAG,YAAY;AAC1B,aAAK,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;AACxC,mBAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACtB,mBAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACtB,kBAAM,CAAC,IAAI,CAAC,CAAC;SAChB;;AAED,6BAAqB,EAAE,CAAC;KAC3B,CAAC;;AAEF,SAAK,CAAC,KAAK,EAAE,CAAC;CACjB,CAAC;;AAEF,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC","file":"main-compiled.js","sourcesContent":["/**\n * Created at 15/11/18.\n * @Author Ling.\n * @Email i@zeroling.com\n */\nlet canvas = document.getElementById('canvas');\nlet stage = new Stage(canvas);\nlet createBall = radius => {\n    radius = (radius === undefined) ? 20 : radius;\n    let r = Math.floor(Math.random() * 255),\n        g = Math.floor(Math.random() * 255),\n        b = Math.floor(Math.random() * 255);\n    return new CVS.$sprite(stage.ctx, {\n        x: 0,\n        y: 0,\n        width: radius * 2,\n        draw: function () {\n            this.ctx.beginPath();\n            this.ctx.arc(0, 0, this.width / 2, 0, Math.PI * 2, true);\n            this.ctx.closePath();\n            this.ctx.fillStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + Math.min(1, this.width / (2 * radius)) + ')';\n            this.ctx.fill();\n        }\n    });\n};\n\nlet initialize = () => {\n    let focalLength = 250,\n        ballR = 5,\n        ballN = 20,\n        balls = [],\n        vpx = 0,\n        vpy = 0,\n        angleY = 0,\n        angleX = 0;\n\n    for (var i = 0; i < ballN; i++) {\n        let ball = createBall(ballR);\n        stage.addChild(ball);\n        ball.xpos = Math.random() * 200 - 100;\n        ball.ypos = Math.random() * 200 - 100;\n        ball.zpos = Math.random() * 200 - 100;\n        balls.push(ball);\n    }\n    vpx = canvas.width / 2;\n    vpy = canvas.height / 2;\n\n    stage.addEventListener('mousemove', function (x, y) {\n        angleY = (x - vpx) * .001;\n        angleX = (y - vpy) * .001;\n    });\n\n    function rotateY(ball, angleY) {\n        let cosy = Math.cos(angleY),\n            siny = Math.sin(angleY),\n            x1 = ball.xpos * cosy - ball.zpos * siny,\n            z1 = ball.zpos * cosy + ball.xpos * siny;\n        ball.xpos = x1;\n        ball.zpos = z1;\n    }\n\n    function rotateX(ball, angleX) {\n        var cosx = Math.cos(angleX),\n            sinx = Math.sin(angleX),\n            y1 = ball.ypos * cosx - ball.zpos * sinx,\n            z1 = ball.zpos * cosx + ball.ypos * sinx;\n        ball.ypos = y1;\n        ball.zpos = z1;\n    }\n\n    function render(ball) {\n        if ( ball.zpos > -focalLength ) {\n            var scale = focalLength / (focalLength + ball.zpos);\n            ball.x = vpx + ball.xpos * scale;\n            ball.y = vpy + ball.ypos * scale;\n            ball.width = ballR * 2 * scale;\n\n            var ck = document.getElementById('ck').checked;\n            if ( ck == false ) ball.width = 0;\n        }\n    }\n\n    function drawLinesBetweenBalls() {\n        var ctx = stage.ctx;\n        ctx.beginPath();\n        ctx.moveTo(balls[0].x, balls[0].y);\n        for (var i = 0; i < balls.length; i++) {\n            ctx.lineTo(balls[i].x, balls[i].y);\n        }\n        ctx.closePath();\n        ctx.stroke();\n    }\n\n    function sortZ() {\n        balls.sort(function (a, b) {\n            return b.zpos - a.zpos\n        });\n        stage.children.sort(function (a, b) {\n            return b.zpos - a.zpos\n        });\n    }\n\n    stage.onRefresh = function () {\n        for (var i = 0, ball; ball = balls[i]; i++) {\n            rotateX(ball, angleX);\n            rotateY(ball, angleY);\n            render(ball);\n        }\n        //sortZ();\n        drawLinesBetweenBalls();\n    };\n\n    stage.start();\n};\n\nwindow.addEventListener('load', initialize, false);"]}